!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r((e="undefined"!=typeof globalThis?globalThis:e||self).FMGofer={})}(this,(function(e){"use strict";var r="The FM script call timed out",o="fmGoferD7738642C91848E08720EAC24EDDA483";function t(){("object"!=typeof window.fmGofer||null===window.fmGofer||Array.isArray(window.fmGofer))&&(window.fmGofer={promises:{},callbackName:o},window[o]=n)}function i(e,r,o,t){var i={resolve:e,reject:r},n="xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,(function(e){var r=16*Math.random()|0;return("x"==e?r:3&r|8).toString(16)}));return 0!==o&&(i.timeoutID=setTimeout((function(){window.fmGofer.promises[n].clearIntervalFn&&window.fmGofer.promises[n].clearIntervalFn(),r(t)}),o)),window.fmGofer.promises[n]=i,n}function n(e,r,o){try{"0"===o&&(o="");var t=function(e){return window.fmGofer.promises[e]}(e);if(void 0===t)throw new Error("No promise found for promiseID ".concat(e,"."));t.timeoutID&&clearTimeout(t.timeoutID),o?t.reject(r):t.resolve(r),function(e){delete window.fmGofer.promises[e]}(e)}catch(e){console.error(e)}}function f(e,n,f,a,c){if(void 0===a&&(a=15e3),void 0===c&&(c=r),"string"!=typeof e||!e)throw new Error("script must be a string");if("number"!=typeof a)throw new Error("timeout must be a number");if("string"!=typeof c)throw new Error("timeoutMessage must be a string");return new Promise((function(r,m){var u;t();var s=i(r,m,a,c),d=JSON.stringify({promiseID:s,callbackName:o,parameter:n}),l=function(e,r,o){if("object"!=typeof window.FileMaker){var t=setTimeout((function(){throw clearInterval(i),new Error("window.FileMaker not found")}),2e3),i=setInterval((function(){"object"==typeof window.FileMaker&&(clearTimeout(t),clearInterval(i),window.FileMaker.PerformScriptWithOption(e,r,o))}),5);return function(){clearTimeout(t),clearInterval(i)}}window.FileMaker.PerformScriptWithOption(e,r,o)}(e,d,f);(null===(u=window.fmGofer.promises)||void 0===u?void 0:u[s])&&(window.fmGofer.promises[s].clearIntervalFn=l)}))}function a(e,o,t,i){void 0===o&&(o=void 0),void 0===t&&(t=15e3),void 0===i&&(i=r);return f(e,o,undefined,t,i)}var c={PerformScript:a,PerformScriptWithOption:f};e.PerformScript=a,e.PerformScriptWithOption=f,e.default=c,Object.defineProperty(e,"__esModule",{value:!0})}));
